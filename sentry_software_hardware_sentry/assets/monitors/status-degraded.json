{
	"name": "[Hardware Sentry] Status degraded for {{[hw.type].name}} {{name.name}}",
	"type": "query alert",
	"query": "max(last_5m):max:hw.status{state:degraded} by {site,hw.type,id,name,info,host} >= 999999",
	"message": "{{#is_warning}}\n## Degraded {{[hw.type].name}}\n\n**{{name.name}}** is degraded on [**{{host.name}}** in **{{site.name}}**](/dash/integration/Hardware%20Sentry%20-%20Host?tpl_var_host={{host.name}}&tpl_var_site={{site.name}}&from_ts={{eval \"last_triggered_at_epoch-2*3600*1000\"}}&to_ts={{eval \"last_triggered_at_epoch+1*3600*1000\"}}&live=false).\n\n## Consequence\n\n{{#is_exact_match \"[hw.type].name\" \"battery\"}}Check that number of allowed recharges has not been exceeded and that the current full charge capacity (FCC) is close to the full charge capacity of initial battery.{{/is_exact_match}} \n{{#is_exact_match \"[hw.type].name\" \"blade\"}}If this blade is part of a distributed server farm, it may be unable to handle the load and may affect the performance of other blades.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu\"}}If degraded, this processor may not be fully operational. This could adversely impact the overall performance of the system. If it is about to fail, this processor is likely to crash very soon.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu_core\"}}If degraded, this processor core may not be fully operational. This could adversely impact the overall performance of the system. If it is about to fail, this processor core is likely to crash very soon.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"disk_controller\"}}A degraded disk controller could have a serious performance impact on its attached disks. A controller about to fail means that its attached disks will no longer be available to the operating system. This may lead to data loss and/or corruption.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"enclosure\"}}The system may be operating with degraded performance, or without redundancy.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"fan\"}}This may lead to a temperature increase of the device cooled by this fan and therefore, to a system crash or damaged hardware.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"logical_disk\"}}The performance of the system may be affected.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"lun\"}}The performance of the system may be affected and redundancy could be lost.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"memory\"}}If degraded, this memory module may not be fully operational and may impact the overall performance of the system. If about to fail, this may soon lead to a system crash or data corruption.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"network\"}}The network traffic handled by this adapter may be slowed down and this may affect other systems communicating with this computer.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"other_device\"}}Unknown.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"physical_disk\"}}If degraded, the performance of the system may be affected. If about to fail, the disk may crash soon, possibly causing a loss of data.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"power_supply\"}}If this is the only power supply in the enclosure and it is about to fail, the server is about to be turned off. A degraded power supply may also lead to an unstable power conversion and thus to severe system crashes or hardware damages.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"robotics\"}}The robotics may be failing.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"tape_drive\"}}The system may no longer be able to perform backups.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"temperature\"}}An out-of-range temperature may lead to a system crash or even damaged hardware.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"voltage\"}}An out-of-range voltage may lead to a system crash.{{/is_exact_match}}\n\n## Recommended action\n\n{{#is_exact_match \"[hw.type].name\" \"battery\"}}The battery needs to be replaced or reconditioned.{{/is_exact_match}} \n{{#is_exact_match \"[hw.type].name\" \"blade\"}}Check why this blade is degraded and try to bring it fully online. Otherwise, try distributing the load to other blades.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu\"}}Replace this processor as soon as possible to prevent a system crash.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu_core\"}}If possible, disable this processor core as soon as possible to prevent a system crash. Consider replacing the entire physical processor.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"disk_controller\"}}Replace this disk controller as soon as possible to avoid performance issues and possible data loss and corruption.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"enclosure\"}}Check with the system vendor the recommended action to restore a fully operational status.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"fan\"}}Check if the fan is no longer cooling the system. If so, replace the fan.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"logical_disk\"}}If the RAID controller is not already handling this problem, check if you need to replace a physical disk or assign a hot spare to this logical disk.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"lun\"}}Verify the status of the underlying HBA and its connectivity. Verify the reachability of the storage system and whether any configuration change has been made to the corresponding storage volume.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"memory\"}}Replace this memory module as soon as possible to prevent a system crash or data corruption.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"network\"}}If possible, try to fix the problem through the network driver settings. Otherwise, replace the network adapter.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"other_device\"}}Unknown.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"physical_disk\"}}You may need to replace this physical disk.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"power_supply\"}}Quickly replace the faulty power supply.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"robotics\"}}Check the robotics for any visible problems and replace it if necessary.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"tape_drive\"}}Check the faulty tape drive for any visible problem and replace it if necessary.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"temperature\"}}Check why the temperature is out of the normal range (it may be due to a fan failure, a severe system overload or a failure in the data center cooling system).{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"voltage\"}}Check why the voltage is out of the normal range (a feeble power supply unit, an unstable power converter, or a severe power overload owing to too many devices within the system).{{/is_exact_match}}\n{{/is_warning}} \n\n{{#is_warning_recovery}}\nRecovered {{[hw.type].name}} **{{name.name}}** from **degraded** status.\n{{/is_warning_recovery}}\n\n## Device details\n\n| Property | Value |\n|---|---|\n| Type | {{[hw.type].name}} |\n| Name | {{name.name}} |\n| ID | {{id.name}} |\n| More information | {{info.name}} |",
	"tags": [
		"integration:hardware-sentry"
	],
	"recommended_monitor_metadata": {
		"description": "Report degraded hardware devices (for devices capable of reporting a status)"
	},
	"options": {
		"thresholds": {
			"critical": 999999,
			"warning": 1
		},
		"notify_audit": false,
		"require_full_window": false,
		"notify_no_data": false,
		"renotify_interval": 0,
		"silenced": {},
		"include_tags": false,
		"new_group_delay": 60
	},
	"priority": 3,
	"restricted_roles": null
}