{
	"name": "[Hardware Sentry] Status failed for {{[hw.type].name}} {{name.name}}",
	"type": "query alert",
	"query": "max(last_5m):max:hw.status{state:failed} by {site,hw.type,id,name,info,host} >= 1",
	"message": "{{#is_alert}}\n## Failed {{[hw.type].name}}\n\n**{{name.name}}** is failed on [**{{host.name}}** in **{{site.name}}**](/dash/integration/Hardware%20Sentry%20-%20Host?tpl_var_host={{host.name}}&tpl_var_site={{site.name}}&from_ts={{eval \"last_triggered_at_epoch-2*3600*1000\"}}&to_ts={{eval \"last_triggered_at_epoch+1*3600*1000\"}}&live=false).\n\n## Consequence\n\n{{#is_exact_match \"[hw.type].name\" \"battery\"}}This battery is non-operational and a power outage will certainly lead to data loss and/or corruption.{{/is_exact_match}} \n{{#is_exact_match \"[hw.type].name\" \"blade\"}}If this blade is part of a distributed server farm, it may be unable to handle the load and may affect the performance of other blades{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu\"}}This processor is not operational. This will impact the overall performance of the system. If it is about to fail this processor may crash very soon.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu_core\"}}This processor core is not operational. This will impact the overall performance of the system. If it is about to fail this processor may crash very soon.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"disk_controller\"}}This disk controller is no longer working. Its attached disks are probably no longer available to the operating system which means data loss or even corruption.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"enclosure\"}}A general problem is reported by the enclosure, or one of its components, preventing its proper operation.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"fan\"}}This may lead to a temperature increase of the device cooled by this fan and therefore, to a system crash or damaged hardware.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"logical_disk\"}}This means that one or more filesystems are no longer available (possible data loss).{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"lun\"}}One or more filesystems are no longer available (possible data loss).{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"memory\"}}This memory module is not operational. This probably impacts the overall performance of the system.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"network\"}}The network traffic (if any) that was processed by this adapter is no longer being handled, or is overloading another network adapter.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"other_device\"}}Unknown.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"physical_disk\"}}If part of a RAID subsystem, a missing disk affects the performance but filesystems should still be up and running. Otherwise, the filesystems of this disk are no longer available (data loss).{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"power_supply\"}}A failing power supply will turn off the system soon.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"robotics\"}}The robotics may no longer be operating.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"tape_drive\"}}The tape library may no longer be able to perform backups.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"temperature\"}}An out-of-range temperature may lead to a system crash or even damaged hardware.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"voltage\"}}An out-of-range voltage may lead to a system crash.{{/is_exact_match}}\n\n## Recommended action\n\n{{#is_exact_match \"[hw.type].name\" \"battery\"}}Replace the battery.{{/is_exact_match}} \n{{#is_exact_match \"[hw.type].name\" \"blade\"}}Check why this blade is degraded and try to bring it fully online. Otherwise, try distributing the load to other blades.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu\"}}Replace this processor as soon as possible to prevent a system overload.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"cpu_core\"}}Disable this processor core if possible and consider replacing the corresponding physical processor as soon as possible to prevent a system overload.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"disk_controller\"}}Replace this disk controller immediately to have a chance to recover the data on the attached disks.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"enclosure\"}}Check with the system vendor the details about the problem as the possible consequences are unspecific.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"fan\"}}Check if the fan is no longer cooling the system. If so, replace the fan.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"logical_disk\"}}Check whether the RAID controller is able to repair the logical disk. If not, you may have to re-create this logical disk and restore its data from a backup image.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"lun\"}}Verify the status of the underlying HBA and its connectivity. Verify the reachability of the storage system and whether any configuration change has been made to the corresponding storage volume.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"memory\"}}Replace this memory module as soon as possible to prevent a system overload.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"network\"}}Replace this network adapter as soon as possible.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"other_device\"}}Unknown.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"physical_disk\"}}Replace this physical disk as soon as possible.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"power_supply\"}}Quickly replace the faulty power supply.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"robotics\"}}Replace or repair the faulty robotics.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"tape_drive\"}}Quickly replace the faulty tape drive.{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"temperature\"}}Check why the temperature is out of the normal range (it may be due to a fan failure, a severe system overload or a failure in the data center cooling system).{{/is_exact_match}}\n{{#is_exact_match \"[hw.type].name\" \"voltage\"}}Check why the voltage is out of the normal range (a feeble power supply unit, an unstable power converter, or a severe power overload owing to too many devices within the system).{{/is_exact_match}}\n{{/is_alert}}\n\n{{#is_recovery}}\nRecovered {{[hw.type].name}} **{{name.name}}** from **failed** status.\n{{/is_recovery}}\n\n## Device details\n\n| Property | Value |\n|---|---|\n| Type | {{[hw.type].name}} |\n| Name | {{name.name}} |\n| ID | {{id.name}} |\n| More information | {{info.name}} |",
	"tags": [
		"integration:hardware-sentry"
	],
	"recommended_monitor_metadata": {
		"description": "Report hardware failures (for devices capable of reporting a status)"
	},
	"options": {
		"thresholds": {
			"critical": 1
		},
		"notify_audit": false,
		"require_full_window": false,
		"notify_no_data": false,
		"renotify_interval": 0,
		"silenced": {},
		"include_tags": false,
		"new_group_delay": 60
	},
	"priority": 2,
	"restricted_roles": null
}